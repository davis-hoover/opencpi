%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% this file was generated by docGen.py
% this file is intended to be edited
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Summary - \Comp}
% Make table whose width is equal to which will be used for text
% wrapping, split into 2 equal columns
\begin{longtable}{|p{\dimexpr0.5\textwidth-2\tabcolsep\relax}
                  |p{\dimexpr0.5\textwidth-2\tabcolsep\relax}|}
  \hline
  \rowcolor{blue}
  & \\
  \hline
  Name              & \comp \\
  \hline
  Latest Version    &  \docVersion \\
  \hline
  Worker Type       & Application \\
  \hline
  Component Library & ocpi.assets.misc\_comps \\
  \hline
  Workers           & \comp.hdl \\
  \hline
  Tested Platforms  & xsim, CentOS 7 \\
  \hline
\end{longtable}

\begin{center}
\textit{\textbf{Revision History}}
  \begin{table}[H]
  \label{table:revisions} % Add "[H]" to force placement of table
    \begin{longtable}{|p{\dimexpr0.15\textwidth-2\tabcolsep\relax}
                      |p{\dimexpr0.75\textwidth-2\tabcolsep\relax}
                      |p{\dimexpr0.1\textwidth-2\tabcolsep\relax}|}
    \hline
    \rowcolor{blue}
    \textbf{Revision} & \textbf{Description of Change} & \textbf{Date} \\
      \hline
      v1.7 & Initial release & 5/28/2020 \\
      \hline
    \end{longtable}
  \end{table}
\end{center}



\section*{Functionality}
\begin{flushleft}
This component receives \verb+ComplexShortWithMetadata+ protocol messages from the \verb+in+ port and converts them to \verb+iqstream+ protocol messages that are transmitted to the \verb+out+ port. The messages for all possible \verb+ComplexShortWithMetadata+ opcodes are ingested, but only those with the \verb+samples+ opcode are converted and sent out the \verb+out+ port. This is due to the fact that \verb+ComplexShortWithMetadata+ has not only a data-related opcode, but multiple non-data-related opcodes, and the \verb+iqstream+ protocol only has a single, data-related opcode. All \verb+out+ port messages use the \verb+iqstream+ protocol's \verb+iq+ opcode.
\end{flushleft}

%\section*{Worker Implementation Details}
%\begin{flushleft}
%\end{flushleft}

%\section*{Theory}
%\begin{flushleft}
%\end{flushleft}

%\section*{Block Diagrams}
%\subsection*{Top level}
%\begin{center}
%\end{center}\pagebreak

%\subsection*{State Machine}
%\begin{flushleft}
%\end{flushleft}

\section*{Source Dependencies}
\subsection*{cswm\_to\_iqstream.hdl}
\begin{itemize}
	\item assets/hdl/primitives/misc\_prims/prot\_pkg.vhd
	\item assets/hdl/primitives/misc\_prims/misc\_prims\_pkg.vhd
	\item assets/hdl/primitives/misc\_prims/misc\_prims\_body.vhd
	\item assets/hdl/primitives/misc\_prims/counter.vhd
	\item assets/hdl/primitives/misc\_prims/prot/swi\_message\_sizer.vhd
	\item assets/hdl/primitives/misc\_prims/prot/cswm\_demarshaller.vhd
	\item assets/hdl/primitives/misc\_prims/prot/iqstream\_marshaller.vhd
	\item assets/components/misc\_comps/cswm\_to\_iqstream.hdl/cswm\_to\_iqstream.vhd
\end{itemize}

\begin{landscape}
  \input{component_spec_properties.inc} % it is recommended to NOT remove this line

  \input{worker_properties.inc} % it is recommended to NOT remove this line

  \input{component_ports.inc} % it is recommended to NOT remove this line

  \input{worker_interfaces.inc} % it is recommended to NOT remove this line
\end{landscape}

%\section*{Control Timing and Signals}
%\subsection*{\comp.hdl}
%\begin{flushleft}
%\end{flushleft}

%\section*{Performance and Resource Utilization}
%\subsubsection*{\comp.rcc}
%\subsubsection*{\comp.hdl}

\section*{Test and Verification}
The Unit Under Test (UUT) is tested by a) generating a file containing protocol-formatted messages which are sent to the UUT via the \verb+file_read+ component, b) using the \verb+file_write+ component to save the file containing the UUT's output as protocol-formatted message, and c) verifying the contents of the output file. The generated file contains one or more \verb+ComplexShortWithMetadata+ \verb+samples+ messages following followed by a message for each of the non-\verb+samples+ opcodes. The sequence of \verb+samples+ messages include samples whose I and Q signals are positive and negative ramp functions, respectively. The output file is verified by confirming that a) the same number of samples exists in the input and output files, and b) the output file contains the same ramp functions as the input.

\section*{Block Diagram}
\input{bd.inc}
