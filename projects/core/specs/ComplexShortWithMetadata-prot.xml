<Protocol>
  <!--
    * This message contains the actual data payload of the protocol. Messages can be from 0 to 4096 samples
    * in length.
  -->
  <Operation name="samples" >
   <Argument name="iq" type="struct" sequencelength="4096">
     <Member name="I" type="short"/>
     <Member name="Q" type="short"/>
   </Argument>
  </Operation>

  <!--
    * In a receive stream, this message is a timestamp for the first sample of the sample message that
    * directly follows. Subsequent samples messages are assumed to be contiguous with the previous message
    * until the next time message appears. In a receive stream, this message is generated by the ADC and
    * should be passed on by all workers in the receive stream.  In a transmit stream, this message is a
    * requested time to transmit the samples message that follows it. In a transmit stream, this message
    * is generated by whichever worker is generating data and should be passed on by all workers in the data
    * stream.
  -->
  <Operation name="time">
   <Argument name="fract_sec" type="ulong"/>
   <Argument name="sec" type="ulong"/>
  </Operation>

  <!--
    * The value that is passed in this operation is the time between samples. The format is Q0.64. This
    * may be used by workers if they need to calculate the time of a sample that is not the first in a
    * message.  This operation is generated by the worker that generates data in the data stream. This
    * message should be passed on by all workers in the data stream.
  -->
  <Operation name="interval">
   <!-- 1/sample_rate -->
   <Argument name="delta_time" type="ulonglong"/>
  </Operation>

  <!--
    * This message causes all output data, produced based on data received prior to this flush operation,
    * for any output ports whose data depends on this port's input data, to be produced on those output
    * ports, independent of the presence of any additional input data after this flush operation. For example,
    * a FIR filter worker with non-zero group delay will empty its pipeline of samples data before passing
    * along the flush message. If the protocol on an output port includes this same flush operation, then
    * a flush operation should also be sent on that port after all the data has been sent.
  -->
  <Operation name="flush"/>

  <!--
    * Signifies an indication from upstream that an *unplanned* gap in samples occurred after the
    * last received sample. Workers should perform any processing appropriate for unplanned gaps,
    * e.g. resetting of filters. If the protocol on an associated output port includes this same
    * sync operation, then a sync operation should also be sent on that port.
  -->
  <Operation name="sync"/>

  <!--
    * Signifies an indication from upstream that a *deliberate* gap in samples occurred after the
    * last received sample. Workers should perform any processing appropriate for deliberate gaps,
    * e.g. immediate turning off of transmitters. If the protocol on an associated output port
    * includes this same end_of_samples operation, then a end_of_samples operation should also
    * be sent on that port.
  -->
  <Operation name="end_of_samples"/>
</Protocol>
